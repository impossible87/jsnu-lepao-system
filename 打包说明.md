# 乐跑系统打包说明

## 文件说明

本项目包含以下重要文件：

- `server.py`: 主程序入口文件，包含Flask应用的核心功能
- `app.py`: 辅助程序文件，包含部分功能实现
- `index.html`: 主页面HTML文件
- `static/`: 静态资源目录，包含CSS、JavaScript等文件
- `templates/`: 模板目录，包含HTML模板文件
- `requirements.txt`: 项目依赖列表
- `build_exe.py`: 打包脚本，用于将项目打包成exe文件
- `打包程序.bat`: 批处理文件，用于一键执行打包过程

## 打包步骤

1. **准备环境**：确保已安装Python 3.6+和pip

2. **安装依赖**：双击`打包程序.bat`，它会自动安装所需依赖

3. **执行打包**：批处理文件会自动运行`build_exe.py`脚本进行打包

4. **获取结果**：打包完成后，可执行文件将位于`dist`目录中，名为`乐跑系统.exe`

## 可能需要清理的文件

打包时以下文件/目录可以不包含，它们不影响程序运行：

- `.idea/`: IDE配置目录
- `__pycache__/`: Python缓存目录
- `*.pyc`: Python编译文件
- `build/`: PyInstaller构建临时目录
- `*.spec`: PyInstaller规范文件
- 已生成的TCX文件（如`running_track_*.tcx`）

## 常见问题

### 1. 打包后程序无法启动

可能原因：
- 缺少依赖：确保`requirements.txt`中的所有依赖都已安装
- 路径问题：程序可能无法找到静态文件或模板，检查打包脚本中的路径配置

解决方法：
- 尝试在命令行中运行exe文件，查看错误信息
- 确保`--add-data`参数正确配置了所有必要文件

### 2. 打包过程中出错

可能原因：
- PyInstaller版本问题
- 依赖冲突

解决方法：
- 尝试更新PyInstaller：`pip install --upgrade pyinstaller`
- 检查是否有依赖冲突，可能需要调整依赖版本

### 3. 打包后的程序体积过大

可能原因：
- Python环境被完整打包
- 包含了不必要的库

解决方法：
- 使用`--exclude-module`排除不必要的模块
- 考虑使用`--onedir`模式代替`--onefile`

## 注意事项

- 打包后的程序首次启动可能较慢，这是正常现象
- 程序会在运行目录创建临时文件，确保有写入权限
- 如需修改程序，请修改源代码后重新打包
